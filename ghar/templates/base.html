<!DOCTYPE html>
<html lang="en">
<head>
{% load static %}
    <meta charset="utf-8">
    <title>Colorlib | Free Bootstrap Website Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta name="robots" content="noindex, nofollow" />

    <title>Mondy | Real Estate HTML Template</title>
    <meta charset="UTF-8">
    <meta name="description" content="Real estate HTML Template">
    <meta name="keywords" content="real estate, html">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    
    <link href="img/favicon.ico" rel="shortcut icon">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">

    
    <link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700,700i,900%7cRoboto:400,400i,500,500i,700,700i&amp;display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block head %} {% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDP76BIL0N496OLE-av_KlsnA0Hsl00c5w&libraries=places"></script>
    <!-- <script src="{% static 'js/location.js' %}"></script> -->
    <link href="{% static 'css/banner.css' %}">
    <link rel=”stylesheet” href=”https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css”>
    {% block style %} {% endblock %}
  </head>

<nav style="z-index: 1000;" class="navbar navbar-expand-lg sticky-top bg-body-tertiary">
  <div class="container-fluid" id="my-nav-container">
    <a class="navbar-brand" href="/">Makaan</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="right: 2vw;">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Link</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Dropdown
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled">Disabled</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
<input id="csrfmiddlewaretoken" type="hidden" class="" name="csrfmiddlewaretoken" value="{{csrf_token}}">
<div class="modal" tabindex="-1" id="customer_contact_modal" style="transition: 1s ease-in-out;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Fill this form to continue</h5>
        <button onclick="customerContactModalCLose();" type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h5 style="color: red;" id="customer_contact_error_msg"></h5>
        <form>
          <div class="mb-3">
            <label for="customerInputName" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="customerInputName" aria-describedby="">
            <!-- <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div> -->
          </div>
          <div class="mb-3">
            <label for="Number" class="form-label">Mobile Number</label>
            <input type="tel" class="form-control" id="Number">
          </div>
          <!-- <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="exampleCheck1">
            <label class="form-check-label" for="exampleCheck1">Check me out</label>
          </div> -->
        </form>
        <button onclick="customerContactSubmit();" type="submit" class="btn btn-primary">Submit</button>
      </div>
      <div class="modal-footer">
        <button onclick="customerContactModalCLose();" type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>
{% block body %} {% endblock %}



{% include 'components/footer.html' %}
{% block script %} {% endblock %}

<script src="{% static 'js/main.js' %}"></script>
<script src="{% static 'js/banner.js' %}"></script>
<script> 
function customerContactModalCLose(){
  $('#customer_contact_modal').hide();
  check_contact = JSON.parse(localStorage.getItem('customer_contact'));
  if (!check_contact.number|length == 10){
    $('#customer_contact_modal').show();
  }
}
$(document).ready(function () {
  check_contact = JSON.parse(localStorage.getItem('customer_contact'));
  if (!check_contact){
    $('#customer_contact_modal').show();
  }
})
function customerContactSubmit(){
  filters = JSON.parse(localStorage.getItem('filter'));
  csrf_token = document.getElementById('csrfmiddlewaretoken').value;
  name = document.getElementById('customerInputName').value;
  number = document.getElementById('Number').value;
  $.ajax({
    url: '/customer_contact/',
    type: 'POST',
    data: {csrfmiddlewaretoken: csrf_token, name: name, number: number, filters: JSON.stringify(filters)},
    success: function(data) {
      console.log(data);
      data = JSON.parse(data);
      console.log(data);
      if (data.status){
        localStorage.setItem('customer_contact', JSON.stringify({name: name, number: number}));
        $('#customer_contact_modal').hide();
      }
      else{
        $('#customer_contact_error_msg').text(data.msg);
      }
    },
  })
}
</script>
</body>
</html>